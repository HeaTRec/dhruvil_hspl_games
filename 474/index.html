<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>puzzleGame</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>

    <header class="header">

    
        <nav class="navbar">
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="PrivacyPolicy.html">Privacy Policy</a>
        </nav>
    
        <div class="icons">
            <div class="fas fa-bars" id="menu-btn"></div>
        </div>
    </header>
    <div class="puzzle-container">
        <div class="puzzle-block" draggable="true">
          <img src="https://i.ibb.co/59kFbg3/9.jpg">  
          </div>
        <div class="puzzle-block" draggable="false">
                 
        </div>
        <div class="puzzle-block" draggable="true">
            <img src="https://i.ibb.co/7Cw9pnk/3.jpg"> 
        </div>
        <div class="puzzle-block" draggable="true">
            <img src="https://i.ibb.co/PQKg7Ym/6.jpg">
        </div>
        <div class="puzzle-block" draggable="true">
            <img src="https://i.ibb.co/6PGx3Yc/4.jpg">
        </div>
        <div class="puzzle-block" draggable="true"> 
            <img src="https://i.ibb.co/nsyN176/8.jpg"> 
        </div>
        <div class="puzzle-block" draggable="true">
          <img src="https://i.ibb.co/5Fnvyz0/5.jpg">
        </div>
        <div class="puzzle-block" draggable="true">
          <img src="https://i.ibb.co/LdBFM5F/1.jpg">
        </div>
        <div class="puzzle-block" draggable="true">
          
          <img src="https://i.ibb.co/3vmLGr9/2.jpg">
          
        </div>
    </div>

    <script>


//correct order of image to check after each move
const correctOrder = [
    'https://i.ibb.co/59kFbg3/9.jpg',
    'https://i.ibb.co/nsyN176/8.jpg',
    'https://i.ibb.co/PQKg7Ym/6.jpg',
    'https://i.ibb.co/5Fnvyz0/5.jpg',
    'https://i.ibb.co/6PGx3Yc/4.jpg',
    'https://i.ibb.co/7Cw9pnk/3.jpg',
    'https://i.ibb.co/LdBFM5F/1.jpg',
    'https://i.ibb.co/3vmLGr9/2.jpg',
]

function puzzleGame(){
    const puzzleImages =  document.querySelectorAll('.puzzle-container  [draggable=true]');
    const emptyBox =  document.querySelector('.puzzle-container  [draggable=false]');
    let currnetlyDraagedImage = null;

    
    // check if order is correct
    const curentImageOrder = []
    let solved = true
    puzzleImages.forEach((image,index)=>{
        const img = image.querySelector('img')
        if(correctOrder[index] !== img.src)
            solved = false
    })
    if(solved){
        console.log(emptyBox)
        document.querySelector('.puzzle-container').classList.add('remove-gap')
        emptyBox.innerHTML=`<img src="https://i.ibb.co/dWVvct0/7.jpg">`
        setTimeout(() => {
            alert("Puzzle Solved")
        }, 300);
        return
    }

    emptyBox.ondrop = dropImg
    emptyBox.ondragenter = dragenter
    emptyBox.ondragstart = (e)=>e.preventDefault()
    emptyBox.ondragover = (e)=>e.preventDefault()

    puzzleImages.forEach(image=>{
        image.appendChild
        image.ondragstart = dragstart
        image.ondragend = dragend
    })
    function dragstart(e){
        currnetlyDraagedImage = this.querySelector('img')
      //remove image from block as drag start
        setTimeout(() => {
            this.querySelector('img').style.display = "none"
        }, 0);
    }
    function dragend(e){
        this.querySelector('img').style.display = "block"
    }
    function dragenter(){
        this.classList.add('hovered')
    }
    function dropImg(){
        currnetlyDraagedImage.parentElement.setAttribute('draggable','false')
        this.setAttribute('draggable','true')
        currnetlyDraagedImage.style.display = 'block'
        this.innetHTML = ''
        this.append (currnetlyDraagedImage)   
        //callling function again in order to update evnets and to check the correct order
        puzzleGame()
    }
}
puzzleGame()
    </script>
    <script src="main.js"></script>
</body>
</html>